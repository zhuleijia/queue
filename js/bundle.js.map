{"version":3,"sources":["webpack/bootstrap 6d0ecdde8d6be50f3b73","./js/stack.js","./js/game.js","./js/gameView.js","./js/movingObject.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;;AAEA;AACA;;AAEA;AACA,IAAG;;;;;;;AC5BH;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA,gCAA+B,qDAAqD;;AAEpF;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;;;;;;AC/IA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,IAAG;AACH;;AAEA;;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA,+CAA8C;AAC9C;AACA,IAAG,kDAAkD;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6d0ecdde8d6be50f3b73\n **/","var Game = require('./game');\nvar GameView = require('./gameView');\n\n\n  var canvas = document.getElementById(\"queue-canvas\");\n  canvas.width = Game.DIM_X;\n  canvas.height = Game.DIM_Y;\n  var ctx = canvas.getContext(\"2d\");\n  var game = new Game();\n\n  var startScreen = document.getElementsByClassName(\"start-screen\")[0],\n      gameScreen = document.getElementById(\"queue-canvas\"),\n      startButton = document.getElementsByClassName(\"start-button\")[0];\n\n\n  startButton.addEventListener(\"click\", function(event) {\n    startScreen.className = \"hide\";\n    gameScreen.className = \"show\";\n\n    new GameView(game, ctx).start();\n  });\n\n  startButton.removeEventListener(\"click\", function(event) {\n\n    startScreen.className = \"hide\";\n    gameScreen.className = \"show\";\n\n    new GameView(game, ctx).start();\n  });\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/stack.js\n ** module id = 0\n ** module chunks = 0\n **/","// var Rectangle = require(\"./rectangle\");\nvar GameView = require(\"./gameView\");\nvar MovingObject = require('./movingObject');\nvar Game = function () {\n  this.reactangles = [];\n  this.score = this.reactangles.length;\n\n};\n\n\nGame.BG_COLOR = \"#000000\";\nGame.DIM_X = 500;\nGame.DIM_Y = 500;\nGame.NUM_RECTANGLES = 1;\n\nGame.prototype.addBaseRectangle = function () {\n\n    this.add(new MovingObject({ pos:[200,300],game: this, vel:[0,0], color:\"green\" }));\n\n    this.score = this.reactangles.length-1;\n    return this.reactangles[this.reactangles.length-1];\n};\nGame.prototype.moveDownRectangles = function () {\n\n  this.reactangles.forEach(function(rectangle){\n    rectangle.pos = [rectangle.pos[0],rectangle.pos[1]+20];\n  });\n};\n\n\nGame.prototype.addRectangles = function (width, vel) {\n  if (width){\n    // console.log(\"adding rectangle\");\n    this.add(new MovingObject({\n      width:width,\n      vel: [Math.abs(vel[0])+0.3,vel[1]],\n      game: this\n    }));\n  }else{\n    this.add(new MovingObject({\n      game: this\n    }));\n  }\n    this.score = this.reactangles.length-1;\n        console.log(\"rect added\");\n        console.log(this.score);\n    return this.reactangles[this.reactangles.length-1];\n};\n\nGame.prototype.drawScore = function(ctx){\n    ctx.font = \"30px san-serif\";\n    ctx.fillStyle = 'white';\n    ctx.fillText(\"queue: \" + this.score, 10, 50);\n};\n\nGame.prototype.gameOver = function(){\n  // debugger;\n  this.cleanUp();\n  this.goToEndScreen();\n};\nGame.prototype.cleanUp = function () {\n  this.reactangles = [];\n  this.score = this.reactangles.length;\n\n};\nvar endScreen =                   document.getElementById(\"end-screen\"),\n    gameScreen =                  document.getElementById(\"queue-canvas\"),\n    startScreen =                 document.getElementById(\"start-screen\"),\n    playAgainButton =             document.getElementById(\"play-again\"),\n    returnToWelcomeScreenButton = document.getElementById(\"return-to-welcome-screen\");\nvar fn = function(event) {\n  endScreen.className = \"hide\";\n  gameScreen.className = \"show\";\n\n  game.resetGame();\n};\nvar fn2 = function(event) {\n  endScreen.className = \"hide\";\n  startScreen.className = \"start-screen\";\n};\nGame.prototype.goToEndScreen = function () {\n  // debugger;\n    game = this;\n    endScreen.className = \"end-screen\";\n    gameScreen.className = \"hide\";\n    playAgainButton.addEventListener(\"click\", fn);\n    // playAgainButton.removeEventListener(\"click\",fn);\n    // playAgainButton.removeEventListener(\"click\", function(event) {\n    //   endScreen.className = \"hide\";\n    //   gameScreen.className = \"show\";\n    //\n    //   game.resetGame();\n    // });\n    returnToWelcomeScreenButton.addEventListener(\"click\", fn2);\n    // returnToWelcomeScreenButton.removeEventListener(\"click\",fn2);\n    // returnToWelcomeScreenButton.removeEventListener(\"click\", function(event) {\n    //   endScreen.className = \"hide\";\n    //   startScreen.className = \"start-screen\";\n    // });\n  };\n  Game.prototype.resetGame = function () {\n    var newGame = new Game();\n    var canvas = document.getElementById(\"queue-canvas\");\n    canvas.width = Game.DIM_X;\n    canvas.height = Game.DIM_Y;\n    var ctx = canvas.getContext(\"2d\");\n    key.unbind('return');\n    new GameView(newGame, ctx).start();\n    playAgainButton.removeEventListener(\"click\",fn);\n    returnToWelcomeScreenButton.removeEventListener(\"click\",fn2);\n  };\n\nGame.prototype.draw = function (ctx) {\n  ctx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fillRect(0, 0, Game.DIM_X, Game.DIM_Y);\n  this.drawScore(ctx);\n  this.reactangles.forEach(function (object) {\n    object.draw(ctx);\n  });\n};\n\nGame.prototype.moveObjects = function (delta) {\n  this.reactangles.forEach(function (object) {\n    object.move(delta);\n  });\n};\n\nGame.prototype.isOutOfBounds = function (pos, width) {\n  return (pos[0] < 0) || (pos[1] < 0) ||\n    (pos[0]+width > Game.DIM_X) || (pos[1] > Game.DIM_Y);\n};\n\n\nGame.prototype.add = function (object) {\n\n  if (object.type === \"MovingObject\") {\n    this.reactangles.push(object);\n  } else {\n    throw \"wtf?\";\n  }\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game.js\n ** module id = 1\n ** module chunks = 0\n **/","var GameView = function (game, ctx) {\n  this.ctx = ctx;\n  this.game = game;\n  this.previousRectangle = this.game.addBaseRectangle();\n  this.currentRectangle = this.game.addRectangles();\n\n\n};\n\n\nGameView.prototype.start = function () {\n  this.bindKeyHandlers();\n  this.lastTime = performance.now();\n\n  this.token1 = requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.stop = function () {\n\n  window.cancelAnimationFrame(this.token1);\n  window.cancelAnimationFrame(this.token2);\n  this.game.gameOver();\n\n};\n\n\nGameView.prototype.animate = function(time){\n\n  var timeDelta = time - this.lastTime;\n\n  this.game.draw(this.ctx);\n  this.game.moveObjects(timeDelta);\n  this.lastTime = time;\n\n  this.token2 = requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.bindKeyHandlers = function () {\n  var that = this;\n  var game = this.game;\n  var width;\n  var vel;\n  var currentRectangle;\n  var previousRectangle;\n\n  key(\"return\", function () {\n    console.log(\"return triggerred\");\n     currentRectangle = that.currentRectangle;\n     previousRectangle = that.previousRectangle;\n    if ((currentRectangle.pos[0] < previousRectangle.pos[0] &&\n      currentRectangle.pos[0]+currentRectangle.width < previousRectangle.pos[0]) ||\n    (currentRectangle.pos[0] > previousRectangle.pos[0] +previousRectangle.width &&\n      currentRectangle.pos[0]+currentRectangle.width > previousRectangle.pos[0]+previousRectangle.width) ){\n      return that.stop();\n\n\n    } else{\n      vel = currentRectangle.vel;\n      currentRectangle.stopRectangle(previousRectangle);\n      width = currentRectangle.width;\n      game.moveDownRectangles();\n      previousRectangle = currentRectangle;\n      currentRectangle = game.addRectangles(width, vel);\n\n      that.previousRectangle = previousRectangle;\n      that.currentRectangle = currentRectangle;\n\n    }\n  });\n};\n\nmodule.exports = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/gameView.js\n ** module id = 2\n ** module chunks = 0\n **/","\nvar DEFAULTS = {\n  POS: [100,280],\n  VEL: [5,0],\n  WIDTH: 100,\n  HEIGHT: 20,\n\t// COLOR: \"#ff0000\",\n\n};\n\n\nvar MovingObject = function (options) {\n  this.pos = options.pos || DEFAULTS.POS;\n  this.vel = options.vel || DEFAULTS.VEL;\n  this.width = options.width || DEFAULTS.WIDTH;\n  this.height = options.height || DEFAULTS.HEIGHT;\n  this.color = options.color || this.getRandomColor();\n  this.game = options.game;\n};\n\nMovingObject.prototype.getRandomColor = function () {\n\n    var letters = '0123456789ABCDEF'.split('');\n    var color = '#';\n    for (var i = 0; i < 6; i++ ) {\n        color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n};\n\nMovingObject.prototype.draw = function (ctx) {\n  ctx.fillStyle = this.color;\n\n  ctx.fillRect(this.pos[0], this.pos[1],this.width, this.height);\n};\n\nvar NORMAL_FRAME_TIME_DELTA = 1000/60;\nMovingObject.prototype.move = function (timeDelta) {\n  var velocityScale = timeDelta / NORMAL_FRAME_TIME_DELTA,\n      offsetX = this.vel[0] * velocityScale,\n      offsetY = this.vel[1] * velocityScale;\n\n  this.pos = [this.pos[0] + offsetX, this.pos[1] + offsetY];\n\n  if (this.game.isOutOfBounds(this.pos, this.width)) {\n    this.vel = [-this.vel[0],this.vel[1]];\n  }\n\n};\n\n\nMovingObject.prototype.stopRectangle = function (previousRectangle){\n  if (this.pos[0] < previousRectangle.pos[0]){//stick out left\n    this.width = this.pos[0] + this.width - previousRectangle.pos[0];\n  } else if (this.pos[0] > previousRectangle.pos[0]){//sticks out right\n    this.width = previousRectangle.pos[0]+ previousRectangle.width - this.pos[0];\n  }\n\n  if (this.pos[0] < previousRectangle.pos[0]){\n    this.pos[0]=previousRectangle.pos[0];\n  }\n  this.vel = [0,0];\n  return this.width;\n};\n\n\nMovingObject.prototype.type = \"MovingObject\";\nmodule.exports = MovingObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/movingObject.js\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}